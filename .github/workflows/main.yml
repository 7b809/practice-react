name: Mirror to Account2

# Trigger whenever master/main is updated
on:
  push:
    branches: ["master"]  # or "main"

jobs:
  mirror:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout the repo (source)
      - name: Checkout source repo
        uses: actions/checkout@v3

      # Step 2: Set up Python
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"

      # Step 3: Install dependencies
      - name: Install dependencies
        run: pip install gitpython

      # Step 4: Run mirror script
      - name: Run mirror.py
        env:
          ACCOUNT2_PAT: ${{ secrets.ACCOUNT2_PAT }}  # PAT for destination repo
        run: python mirror.py
